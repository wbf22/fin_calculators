<!DOCTYPE html>
<html lang="en" id="html" style="background-color: rgb(255, 255, 255); margin: 0px; padding: 0px; width: 100%;">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Investment Calculator</title>
	<base target="_self">


	<style>
		:root {
			--background: #03191e;
			--font_color: #c1cfda;
			--header_color: #2f867d;
			--input_color: #941c2f;
			--divider: #20a4f3;
		}

		#html {
			background-color: rgb(255, 255, 255);
			margin: 0px;
			padding: 0px;
		}

		#header {
			padding: 1rem;
			margin: 0px;
		}

		#body {
			margin: 0px;
			padding: 0px;
			min-height: 100vh;
			font-family: Roboto;
			color: var(--font_color);
			background-color: var(--background);
			font-size: 1.1rem;
		}

		#main_form {
			padding: 0rem;
			display: grid;
			grid-template-columns: 1fr 1fr;
			width: 40vw;
		}

		#element_d63ea53720a94a7b {
			padding: 1rem;
		}

		#starting_amount_input {
			padding: 1rem;
			height: 1rem;
			place-self: center start;
			width: 10rem;
		}

		#element_dda42f80114f4b20 {
			padding: 1rem;
		}

		#years_input {
			padding: 1rem;
			height: 1rem;
			place-self: center start;
			width: 10rem;
		}

		#element_ffa3b74a7d454892 {
			padding: 0rem;
			display: grid;
			grid-template-columns: 1fr 1fr;
			width: 40vw;
		}

		.input {
			background-color: var(--input_color);
			border: 0px;
			border-radius: 5px;
			color: inherit;
			font-size: 1.1rem;
		}

		.table_input {
			background-color: var(--input_color);
			border: 0px;
			color: inherit;
			width: 100%;
			box-sizing: border-box;
			text-align: right;
			padding: 1rem;
		}

		#element_9af5b2b1e7b04a51 {
			padding: 1rem;
		}

		#return_rate_input {
			padding: 1rem;
			height: 1rem;
			place-self: center start;
			width: 10rem;
		}

		#element_d35ff45ea9d64b64 {
			padding: 0rem;
			display: grid;
			grid-template-columns: 1fr 1fr;
			width: 40vw;
		}

		#element_428421ce4c44442a {
			padding: 1rem;
		}

		#element_2f696776d4d54f15 {
			padding: 0rem;
			display: grid;
			grid-template-columns: 1fr 1fr;
			width: 40vw;
		}

		#element_3a3a62b0bc9745d6 {
			padding: 1rem;
		}

		#element_a5035ca27d934557 {
			padding: 1rem;
		}

		#compound_select {
			height: 1rem;
			place-self: center start;
			width: 10rem;
			line-height: 1rem;
			padding: 1rem;
			box-sizing: inherit;
		}

		#contribution_schedule_table {
			padding: 1rem;
			width: 100%;
			border-collapse: collapse;
		}

		#contribution_schedule_body {
			padding: 1rem;
		}

		#element_6dcd66c32edf4c68 {
			padding: 1rem;
		}

		#contribute_input {
			height: 1rem;
			place-self: center start;
			width: 10rem;
			line-height: 1rem;
			padding: 1rem;
			box-sizing: inherit;
		}

		#element_2559dff06b13457f {
			padding: 1rem;
		}

		#element_f1cad8d8bf9b43af {
			padding: 1rem;
		}

		#element_183c540131fa44a2 {
			padding: 0rem;
			display: grid;
			grid-template-columns: 1fr 1fr;
			width: 40vw;
		}

		#con_schedule_row {
			padding: 1rem;
		}

		.table_header {
			text-align: left;
			background-color: var(--header_color);
			border: 1px solid;
			margin: 0px;
			padding: 1rem;
		}

		.table_cell {
			text-align: right;
			border: 1px solid;
			padding: 0.5rem;
			background-color: var(--input_color);
		}

		.table_input_cell {
			padding: 0px;
		}

		#contribution_table_section {
			display: flex;
			flex-direction: column;
		}

		#element_70d86a58ad32498f {
			margin: 1rem;
			background-color: var(--header_color);
			border: 1px solid;
			padding: 0rem;
			width: 2rem;
			height: 2rem;
			text-align: center;
			line-height: 2rem;
			align-self: center;
		}

		#element_0368dc1ef42a4d2d {
			font-size: 1.5rem;
			padding: 0rem 1rem;
		}

		#calculation_type_select {
			height: 1rem;
			place-self: center start;
			width: 10rem;
			line-height: 1rem;
			padding: 1rem;
			box-sizing: inherit;
		}

		#element_e7c2a3f04d2a4495 {
			padding: 1rem;
		}

		#element_6cceff56758b4406 {
			padding: 1rem;
		}

		#element_8daebdfd5b274754 {
			padding: 0rem;
			display: grid;
			grid-template-columns: 1fr 1fr;
			width: 40vw;
			background-color: var(--header_color);
			border: 1px solid;
		}

		#element_fbb8f750cbad4995 {
			padding: 1rem;
		}

		#element_7aa1db97bb1c4d8c {
			padding: 1rem;
		}

		#element_ee6f8b28124e4802 {
			padding: 1rem;
		}

		#results_section {
			padding: 1rem;
		}

		#input_section {
			padding: 1rem;
			border: 1px;
		}

		#main_section {
			padding: 1rem;
			display: flex;
			flex-direction: row;
		}

		#result_table_body {
			padding: 1rem;
		}

		#element_0bab3ccaf87e459a {
			padding: 1rem;
			width: 36vw;
			border-collapse: collapse;
			align-self: start;
			margin: 1rem 0rem 0rem;
		}

		#element_991261ae5ee743dc {
			padding: 1rem;
			margin: 0px;
			height: 3.3rem;
			line-height: 3.4rem;
			background-color: var(--header_color);
			border: 1px solid;
		}

		#results_table {
			padding: 0rem 1rem;
			width: 36vw;
		}

		#element_bf00446d90654b6b {
			padding: 1rem;
		}

		#element_6065d01935a94cff {
			padding: 1rem;
		}

		#end_balance_total {
			padding: 1rem;
			text-align: right;
		}

		#element_fc02f3786b084006 {
			padding: 1rem;
		}

		#contributions_total {
			padding: 1rem;
			text-align: right;
		}

		#element_ba47f496a4844036 {
			padding: 1rem;
		}

		#element_c30730c548974a6c {
			padding: 1rem;
		}

		#interest_total {
			padding: 1rem;
			text-align: right;
		}

		#element_497c98c3b24949e0 {
			padding: 1rem;
		}

		#element_6217b882403b4594 {
			height: 2px;
			background-color: var(--divider);
		}

		#result_string {
			padding: 0rem 1rem;
		}

		#title {
			margin: 0px;
			padding: 0px;
			font-size: 3rem;
		}

		.result_text {
			font-size: 1.2rem;
		}

		#element_3af478648e8c4def {
			padding: 1rem;
		}

		#element_9bf22235ad2c4965 {
			padding: 1rem;
		}

		#element_004122e17681484b {
			padding: 1rem;
		}

		#download_section {
			display: flex;
			justify-content: end;
			align-items: center;
		}

		#element_0adfe3dacb6b4e2e {
			padding: 1rem;
		}

		#upload_section {
			display: flex;
			justify-content: right;
			align-items: center;
		}

		#upload_dialog {
			z-index: 100;
			position: fixed;
			top: 40%;
			left: 40%;
			background-color: var(--background);
			padding: 3rem;
			display: none;
		}

		#element_b4503eeb9cfb4c48 {
			padding: 1rem;
			border-collapse: collapse;
		}

		#element_3cbabec052554233 {
			padding: 1rem;
		}

		#element_1bbfb817e468459d {
			padding: 1rem;
		}

		#element_0fa3ad09b70a4691 {
			padding: 1rem;
		}

		#element_ad732bc9bd134c4b {
			padding: 1rem;
		}

		#element_d5fc85308d704423 {
			padding: 1rem;
		}

		#element_dff922823fbe42e9 {
			padding: 1rem;
		}

		#element_fddba7637f054962 {
			padding: 1rem;
		}

		#element_358e279004ee4d48 {
			padding: 1rem;
		}

		#element_df8b6cbfb35549d5 {
			padding: 1rem;
		}

		#element_8c9bec85b61f4072 {
			padding: 1rem;
		}

		#element_61ece5abba5442dd {
			padding: 1rem;
		}

		#element_cfbdda8057e04173 {
			padding: 1rem;
		}

		.column_select {
			background-color: inherit;
			color: inherit;
			border: 0px;
			cursor: pointer;
		}

		#element_930b386ef3a44024 {
			padding: 1rem;
		}

		#element_5d4f66aae1794419 {
			padding: 1rem;
		}

		#element_9b2eee3d9e9640f8 {
			padding: 1rem;
		}

		#element_d3007fa967dc4595 {
			padding: 1rem;
		}

		#element_0f0d55edcdee41b3 {
			padding: 1rem;
		}

		#element_a5369b5a57734112 {
			padding: 1rem;
		}

		#element_b458f2e109bd487b {
			padding: 1rem;
		}

		#element_3a863eb35f394d35 {
			padding: 1rem;
		}

		#element_873745b17a7b4176 {
			padding: 1rem;
		}

		#element_759f5542ad4146c1 {
			padding: 1rem;
		}

		#element_2e252f9278724cff {
			padding: 1rem;
		}

		#element_07cdf21ae9724af9 {
			padding: 0.4rem;
			background-color: var(--header_color);
			border: 1px solid;
			color: inherit;
			border-radius: 2px;
			cursor: pointer;
		}

		#element_07cdf21ae9724af9:hover {
			cursor: pointer;
		}



		.up_download_svg {
			cursor: pointer;
		}
	</style>
	<link rel="preconnect" href="https://fonts.googleapis.com" id="preconnect1">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" id="preconnect2">
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&amp;display=swap"
		id="Roboto">
</head>

<body id="body">

	<div id="header">
		<h1 id="title">Investment Calculator</h1>
	</div>

	<section id="main_section">
		<section id="input_section">
			<div id="element_8daebdfd5b274754">
				<p id="element_0368dc1ef42a4d2d">Calculation</p><select id="calculation_type_select" class="input">
					<option id="element_e7c2a3f04d2a4495">End Amount</option>
					<option id="element_6cceff56758b4406">Average Contribution</option>
					<option id="element_fbb8f750cbad4995">Return Rate</option>
					<option id="element_7aa1db97bb1c4d8c">Starting Amount</option>
					<option id="element_ee6f8b28124e4802">Investment Length</option>
				</select>
			</div>
			<div id="main_form">
				<p id="element_d63ea53720a94a7b">Starting Amount</p><input id="starting_amount_input" class="input"
					value="$20,000">
			</div>
			<div id="element_ffa3b74a7d454892">
				<p id="element_dda42f80114f4b20">Years</p><input id="years_input" class="input" placeholder="years"
					value="10">
			</div>
			<div id="element_d35ff45ea9d64b64">
				<p id="element_9af5b2b1e7b04a51">Return Rate</p><input id="return_rate_input" class="input" value="7%">
			</div>
			<div id="element_2f696776d4d54f15">
				<p id="element_428421ce4c44442a">Compound</p><select id="compound_select" class="input">
					<option id="element_3a3a62b0bc9745d6">annually</option>
					<option id="element_a5035ca27d934557">monthly</option>
				</select>
			</div>
			<div></div>
			<div id="element_6217b882403b4594"></div>
			<div id="element_183c540131fa44a2">
				<p id="element_6dcd66c32edf4c68">Contribute</p><select id="contribute_input" class="input">
					<option id="element_2559dff06b13457f">annually</option>
					<option id="element_f1cad8d8bf9b43af">monthly</option>
				</select>
			</div>
			<div id="upload_section">
				<svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" fill="currentColor"
					class="up_download_svg bi bi-file-arrow-up-fill" viewBox="0 0 16 16">
					<path
						d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M7.5 6.707 6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0z"
						id="element_9bf22235ad2c4965"></path>
				</svg>
				<div id="element_3af478648e8c4def">upload csv</div>
			</div>
			<div id="contribution_table_section">
				<table id="contribution_schedule_table" class="table_cell">
					<tbody>
						<tr id="element_61413554c0954d23">
							<th id="element_d2759fcf1b05432f" class="table_header">Start Period</th>
							<th id="element_a7869b95e2cc4970" style="padding: 1rem;" class="table_header">Amount</th>
						</tr>
					</tbody>
					<tbody id="contribution_schedule_body">
						<tr id="con_schedule_row">
							<td class="table_cell table_input_cell">
								<input class="table_input" value="1">
							</td>
							<td class="table_cell table_input_cell">
								<input class="table_input" value="$1,000">
							</td>
						</tr>
					</tbody>
				</table>
				<p id="element_70d86a58ad32498f">+</p>
			</div>
		</section>
		<section id="results_section">
			<h2 id="element_991261ae5ee743dc">Results</h2>
			<p id="result_string" class="result_text">You'd have an end balance of <span
					style="color: var(--divider)">$53,159.48</span> in 10 years</p>
			<table id="results_table">
				<tbody>
					<tr id="element_bf00446d90654b6b">
						<td id="element_6065d01935a94cff" class="result_text"><strong>End Balance</strong></td>
						<td id="end_balance_total" class="result_text"><strong>$53,159.48</strong></td>
					</tr>
					<tr id="element_ba47f496a4844036">
						<td id="element_fc02f3786b084006" class="result_text">Total Contributions</td>
						<td id="contributions_total" class="result_text">$30,000.00</td>
					</tr>
					<tr id="element_497c98c3b24949e0">
						<td id="element_c30730c548974a6c" class="result_text">Total Interest</td>
						<td id="interest_total" class="result_text">$23,159.48</td>
					</tr>
				</tbody>
			</table>

			<div id="download_section">
				<svg id="download_svg" xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" fill="currentColor"
					class="up_download_svg bi bi-file-arrow-down-fill" viewBox="0 0 16 16" onclick="download()">
					<path
						d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M8 5a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5A.5.5 0 0 1 8 5"
						id="element_004122e17681484b">
					</path>
				</svg>
				<p id="element_0adfe3dacb6b4e2e">download as csv</p>
			</div>
			<table id="element_0bab3ccaf87e459a" class="table_cell">
				<tbody id="element_478e14e0ac514ab3">
					<tr id="element_a6b4b4fddfd34076">
						<th id="element_00e022dcd0c24b2f" class="table_header">Year</th>
						<th id="element_95ccd99b79344e95" style="padding: 1rem;" class="table_header">Deposit</th>
						<th id="element_0607752994234383" class="table_header">Interest</th>
						<th id="element_12cfbf84a34c4c43" class="table_header">Ending Balance</th>
					</tr>
				</tbody>
				<tbody id="result_table_body">
					<tr>
						<td class="table_cell">1</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$1,400.00</td>
						<td class="table_cell">$22,400.00</td>
					</tr>
					<tr>
						<td class="table_cell">2</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$1,568.00</td>
						<td class="table_cell">$24,968.00</td>
					</tr>
					<tr>
						<td class="table_cell">3</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$1,747.76</td>
						<td class="table_cell">$27,715.76</td>
					</tr>
					<tr>
						<td class="table_cell">4</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$1,940.10</td>
						<td class="table_cell">$30,655.86</td>
					</tr>
					<tr>
						<td class="table_cell">5</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$2,145.91</td>
						<td class="table_cell">$33,801.77</td>
					</tr>
					<tr>
						<td class="table_cell">6</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$2,366.12</td>
						<td class="table_cell">$37,167.90</td>
					</tr>
					<tr>
						<td class="table_cell">7</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$2,601.75</td>
						<td class="table_cell">$40,769.65</td>
					</tr>
					<tr>
						<td class="table_cell">8</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$2,853.88</td>
						<td class="table_cell">$44,623.53</td>
					</tr>
					<tr>
						<td class="table_cell">9</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$3,123.65</td>
						<td class="table_cell">$48,747.17</td>
					</tr>
					<tr>
						<td class="table_cell">10</td>
						<td class="table_cell">$1,000.00</td>
						<td class="table_cell">$3,412.30</td>
						<td class="table_cell">$53,159.48</td>
					</tr>
				</tbody>
			</table>
		</section>
	</section>

	<div id="upload_dialog" class="">

		<h1 id="element_2c4889861b884014">Csv Import</h1>
		<p id="element_8c9bec85b61f4072">Select the columns to use for start period and amount</p>
		<button id="element_07cdf21ae9724af9">Done</button>
		<table id="element_b4503eeb9cfb4c48">
			<tbody id="element_3cbabec052554233">
				<tr id="element_cfbdda8057e04173">
					<td id="element_61ece5abba5442dd" class="">
						<select id="element_6fe15f6703c64043" class="column_select">
							<option id="element_9b2eee3d9e9640f8"></option>
							<option id="element_930b386ef3a44024">Start Period</option>
							<option id="element_5d4f66aae1794419">Amount</option>
						</select>
					</td>


					<td id="element_b458f2e109bd487b" class="">
						<select id="element_882aa63ae5124a7a" class="column_select">
							<option id="element_d3007fa967dc4595"></option>
							<option id="element_0f0d55edcdee41b3">Start Period</option>
							<option id="element_a5369b5a57734112">Amount</option>
						</select>
					</td>
					<td id="element_2e252f9278724cff" class="">
						<select id="element_98fa88fc9a1d4781" class="column_select">
							<option id="element_3a863eb35f394d35"></option>
							<option id="element_873745b17a7b4176">Start Period</option>
							<option id="element_759f5542ad4146c1">Amount</option>
						</select>
					</td>
				</tr>
				<tr id="element_1bbfb817e468459d">
					<th id="element_0fa3ad09b70a4691" class="table_header">column 1</th>
					<th id="element_ad732bc9bd134c4b" class="table_header">column 2</th>
					<th id="element_d5fc85308d704423" class="table_header">column 3</th>
				</tr>
				<tr id="element_dff922823fbe42e9">
					<td id="element_fddba7637f054962" class="table_cell">value</td>
					<td id="element_358e279004ee4d48" class="table_cell">value</td>
					<td id="element_df8b6cbfb35549d5" class="table_cell">value</td>
				</tr>
			</tbody>
		</table>
	</div>


	<!-- general -->
	<script>
		let table_values = [];
		let calculation_type_select = document.getElementById("calculation_type_select");
		let starting_amount_input = document.getElementById("starting_amount_input");
		let years_input = document.getElementById("years_input");
		let return_rate_input = document.getElementById("return_rate_input");
		let compound_select = document.getElementById("compound_select");
		let contribute_input = document.getElementById("contribute_input");
		let contribution_schedule_body = document.getElementById("contribution_schedule_body");
		let result_table_body = document.getElementById("result_table_body");
		let end_balance_total = document.getElementById("end_balance_total");
		let contributions_total = document.getElementById("contributions_total");
		let interest_total = document.getElementById("interest_total");
		let result_string = document.getElementById("result_string");
		let contribution_schedule_table = document.getElementById("contribution_schedule_table");

		calculation_type_select.addEventListener("change", () => {
			calculate();
		});
		starting_amount_input.addEventListener("change", () => {
			if (!starting_amount_input.value) starting_amount_input.value = "20000";
			let num = parseCurrency(starting_amount_input.value);
			starting_amount_input.value = formatCurrency(num);
			calculate();
		});
		years_input.addEventListener("change", () => {
			if (!years_input.value) years_input.value = "0";
			calculate();
		});
		return_rate_input.addEventListener("change", () => {
			if (!return_rate_input.value) return_rate_input.value = "7%";
			let percent = return_rate_input.value.replace(/[%]/g, "");
			return_rate_input.value = percent + "%";
			calculate();
		});
		compound_select.addEventListener("change", () => {
			calculate();
		});
		contribute_input.addEventListener("change", () => {
			calculate();
		});
		contribution_schedule_table.addEventListener("change", (e) => {
			if (e.target.tagName == "INPUT") {
				e.target.value = formatCurrency(parseFloat(e.target.value));
			}
			calculate();
		});

	</script>

	<!-- util -->
	<script>
		function formatCurrency(number) {
			if (typeof number !== "number") return "";
			// Ensure two decimals if needed
			return "$" + number.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
		}

		function parseCurrency(str) {
			if (typeof str !== "string") return NaN;
			// Remove $ and commas, then convert to number
			const num = parseFloat(str.replace(/[$,]/g, ""));
			return isNaN(num) ? 0 : num;
		}
	</script>

	<!-- upload download -->
	<script>

		function download() {
			let csv = ["Year,Deposit,Interest,Ending Balance\n"];
			for (let m = 0; m < table_values.length; m++) {
				let [year, deposit, interest, ending_balance] = table_values[m];
				csv.push(year);
				csv.push(",");
				csv.push(deposit);
				csv.push(",");
				csv.push(interest);
				csv.push(",");
				csv.push(ending_balance);
				csv.push("\n");
			}

			let csv_str = csv.join("");

			const blob = new Blob([csv_str], { type: "text/csv;charset=utf-8;" });
			const url = URL.createObjectURL(blob);

			const a = document.createElement("a");
			a.href = url;
			a.download = "investment.csv";
			a.click();

			URL.revokeObjectURL(url);
		}

	</script>

	<!-- calculations -->
	<script>


		function calculate() {
			if (calculation_type_select.value == "End Amount") {
				let compound_period = compound_select.value == "monthly" ? 1 : 12;
				let contribute_period = contribute_input.value == "monthly" ? 1 : 12;
				let periods = parseInt(years_input.value) * 12;
				let rate = parseFloat(return_rate_input.value.slice(0, -1)) / 100.0;

				let contribution_schedule = [];
				for (let child of contribution_schedule_body.children) {

					if (child.querySelector("td")) {
						contribution_schedule.push(
							[parseInt(child.children[0].children[0].value), parseCurrency(child.children[1].children[0].value)]
						);
					}
				}

				result_table_body.replaceChildren();


				// calculate schedule
				table_values = [];
				let accumulation_schedule = [];
				let interest = 0;
				let balance = parseCurrency(starting_amount_input.value);
				let current_contribution = contribution_schedule[0][1];
				let contr_index = 0;
				let last_compounded_balance = balance;
				let year_interest = 0;
				let year_contributions = 0;
				for (let m = 1; m < periods + 1; m++) {

					// follow contribution schedule
					if (m == contribution_schedule[contr_index][0] / contribute_period) {
						current_contribution = contribution_schedule[contr_index][1];
						contr_index += contr_index < contribution_schedule.length - 1 ? 1 : 0;
					}

					// calculate contributions
					let interest = 0;
					let contribution_amount = 0;
					if (contribute_input.value == "monthly") {
						contribution_amount = current_contribution;
					}
					else if (m % 12 == 0) {
						contribution_amount = current_contribution;
					}

					// calculate interest
					if (compound_select.value == "monthly") {
						interest = balance * rate / 12;
						year_interest += interest;
					}
					else {
						if (m % 12 == 0) {
							let interest_on_contributions = year_contributions * 0.5 * rate;
							interest = interest_on_contributions + last_compounded_balance * rate;
							last_compounded_balance = balance + interest + contribution_amount;
							year_interest = interest;
						}
					}
					year_contributions += contribution_amount;

					// calculate new balance
					balance = balance + interest + contribution_amount;
					accumulation_schedule[m] = [contribution_amount, interest, balance];

					// add to table
					if (m % 12 == 0) {
						const tr = document.createElement("tr");
						tr.innerHTML = `
							<td class="table_cell">${m / 12}</td>
							<td class="table_cell">${formatCurrency(year_contributions)}</td>
							<td class="table_cell">${formatCurrency(year_interest)}</td>
							<td class="table_cell">${formatCurrency(balance)}</td>
						`;
						table_values.push([m / 12, year_contributions, year_interest, balance]);

						result_table_body.appendChild(tr);
						year_interest = 0;
						year_contributions = 0;

					}
				}


				// set result totals
				let end_balance_formatted = formatCurrency(accumulation_schedule[accumulation_schedule.length - 1][2]);
				end_balance_total.innerHTML = `<strong>${end_balance_formatted}</strong>`;
				let total_contributions = 0;
				let total_interest = 0;
				for (let m = 1; m < accumulation_schedule.length; m++) {
					total_contributions += accumulation_schedule[m][0];
					total_interest += accumulation_schedule[m][1];
				}
				contributions_total.textContent = formatCurrency(total_contributions + parseCurrency(starting_amount_input.value));
				interest_total.textContent = formatCurrency(total_interest);
				result_string.innerHTML = `You'd have an end balance of <span style="color: var(--divider)">${end_balance_formatted}</span> in ${years_input.value} years`;
			}

		}

		calculate();
	</script>






</body>

</html>